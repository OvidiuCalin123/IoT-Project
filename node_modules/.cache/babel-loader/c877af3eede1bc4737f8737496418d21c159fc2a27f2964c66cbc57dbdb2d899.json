{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import firebase from\"firebase/compat/app\";import\"firebase/storage\";import logo from\"../designFIles/EcoLight.png\";import googleLoginImage from\"../designFIles/googlelogin.png\";import\"./logInIndex.css\";import{signInWithGooglePopup}from\"./firebase\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LogInIndex=function LogInIndex(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),bulbOnTime=_useState2[0],setBulbOnTime=_useState2[1];var logGoogleUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,token,baseURL;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;sessionStorage.clear();_context.next=4;return signInWithGooglePopup();case 4:response=_context.sent;console.log(response);token=uuidv4();baseURL=window.location.origin;window.location.href=\"\".concat(baseURL,\"/welcome?token=\").concat(token);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(\"Error signing in with Google:\",_context.t0.message);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function logGoogleUser(){return _ref.apply(this,arguments);};}();useEffect(function(){var fetchBulbOnTime=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,downloadURL,response1,data1,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"https://firebasestorage.googleapis.com/v0/b/iot-light-68724.appspot.com/o/bulbOnTime.txt\",{method:\"GET\",headers:{\"X-GUploader-UploadID\":\"ABPtcPp-UMtweR0_8btJXq44qDksab6Ej5s_QyCSCoyv5Ip2wuRmBXHIDCKrS_ywrGHYjyJrDKh40O-jFA\",\"X-Content-Type-Options\":\"nosniff\",\"Content-Type\":\"application/json; charset=UTF-8\",\"Access-Control-Expose-Headers\":\"Content-Range, X-Firebase-Storage-XSRF\",\"Access-Control-Allow-Origin\":\"*\"}});case 3:response=_context2.sent;downloadURL=\"https://firebasestorage.googleapis.com/v0/b/iot-light-68724.appspot.com/o/bulbOnTime.txt?alt=media&token=74cb4268-f94e-46da-8e54-83489ab34a80\";_context2.next=7;return fetch(downloadURL);case 7:response1=_context2.sent;_context2.next=10;return response1.text();case 10:data1=_context2.sent;console.log(data1);_context2.next=14;return response.text();case 14:data=_context2.sent;setBulbOnTime(data);console.log(\"CEVA\"+data);_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching bulbOnTime.txt:\",_context2.t0.message);case 22:case\"end\":return _context2.stop();}},_callee2,null,[[0,19]]);}));return function fetchBulbOnTime(){return _ref2.apply(this,arguments);};}();fetchBulbOnTime();window.history.replaceState({},document.title,window.location.pathname);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo,alt:\"Logo\",style:{width:\"25rem\",height:\"auto\"}}),/*#__PURE__*/_jsx(\"img\",{id:\"google-login-btn\",src:googleLoginImage,alt:\"Google Login\",className:\"google-login-button\",onClick:function onClick(e){e.preventDefault();e.stopPropagation();logGoogleUser();}})]});};","map":{"version":3,"names":["React","useState","useEffect","firebase","logo","googleLoginImage","signInWithGooglePopup","v4","uuidv4","jsx","_jsx","jsxs","_jsxs","LogInIndex","_useState","_useState2","_slicedToArray","bulbOnTime","setBulbOnTime","logGoogleUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","token","baseURL","wrap","_callee$","_context","prev","next","sessionStorage","clear","sent","console","log","window","location","origin","href","concat","t0","error","message","stop","apply","arguments","fetchBulbOnTime","_ref2","_callee2","downloadURL","response1","data1","data","_callee2$","_context2","fetch","method","headers","text","history","replaceState","document","title","pathname","className","children","src","alt","style","width","height","id","onClick","e","preventDefault","stopPropagation"],"sources":["C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/src/IoT/logInIndex.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport \"firebase/storage\";\r\nimport logo from \"../designFIles/EcoLight.png\";\r\nimport googleLoginImage from \"../designFIles/googlelogin.png\";\r\nimport \"./logInIndex.css\";\r\nimport { signInWithGooglePopup } from \"./firebase\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport const LogInIndex = () => {\r\n  const [bulbOnTime, setBulbOnTime] = useState(null);\r\n\r\n  const logGoogleUser = async () => {\r\n    try {\r\n      sessionStorage.clear();\r\n      const response = await signInWithGooglePopup();\r\n      console.log(response);\r\n      const token = uuidv4();\r\n      const baseURL = window.location.origin;\r\n      window.location.href = `${baseURL}/welcome?token=${token}`;\r\n    } catch (error) {\r\n      console.error(\"Error signing in with Google:\", error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchBulbOnTime = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          \"https://firebasestorage.googleapis.com/v0/b/iot-light-68724.appspot.com/o/bulbOnTime.txt\",\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              \"X-GUploader-UploadID\":\r\n                \"ABPtcPp-UMtweR0_8btJXq44qDksab6Ej5s_QyCSCoyv5Ip2wuRmBXHIDCKrS_ywrGHYjyJrDKh40O-jFA\",\r\n              \"X-Content-Type-Options\": \"nosniff\",\r\n              \"Content-Type\": \"application/json; charset=UTF-8\",\r\n              \"Access-Control-Expose-Headers\":\r\n                \"Content-Range, X-Firebase-Storage-XSRF\",\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n            },\r\n          }\r\n        );\r\n        const downloadURL =\r\n          \"https://firebasestorage.googleapis.com/v0/b/iot-light-68724.appspot.com/o/bulbOnTime.txt?alt=media&token=74cb4268-f94e-46da-8e54-83489ab34a80\";\r\n\r\n        const response1 = await fetch(downloadURL);\r\n        const data1 = await response1.text();\r\n        console.log(data1);\r\n\r\n        const data = await response.text();\r\n        setBulbOnTime(data);\r\n        console.log(\"CEVA\" + data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching bulbOnTime.txt:\", error.message);\r\n      }\r\n    };\r\n\r\n    fetchBulbOnTime();\r\n    window.history.replaceState({}, document.title, window.location.pathname);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <img\r\n        className=\"logo\"\r\n        src={logo}\r\n        alt=\"Logo\"\r\n        style={{ width: \"25rem\", height: \"auto\" }}\r\n      />\r\n      <img\r\n        id=\"google-login-btn\"\r\n        src={googleLoginImage}\r\n        alt=\"Google Login\"\r\n        className=\"google-login-button\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          logGoogleUser();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}