{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import logo from\"../designFIles/EcoLight.png\";import googleLoginImage from\"../designFIles/googlelogin.png\";import\"./logInIndex.css\";import{signInWithGooglePopup,getStorage,ref,getDownloadURL}from\"./firebase\";// Assuming you have firebase.js with necessary functions\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LogInIndex=function LogInIndex(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),fileContent=_useState2[0],setFileContent=_useState2[1];var logGoogleUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,storage,fileRef,fileUrl,fileData,text;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signInWithGooglePopup();case 3:response=_context.sent;console.log(response);storage=getStorage();// Initialize Firebase Storage\nfileRef=ref(storage,\"file.txt\");// Reference to your file.txt\n_context.next=9;return getDownloadURL(fileRef);case 9:fileUrl=_context.sent;_context.next=12;return fetch(fileUrl);case 12:fileData=_context.sent;_context.next=15;return fileData.text();case 15:text=_context.sent;// Get text content of the file\nsetFileContent(text);// Set file content to state\n_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);console.error(\"Error signing in with Google:\",_context.t0.message);case 22:case\"end\":return _context.stop();}},_callee,null,[[0,19]]);}));return function logGoogleUser(){return _ref.apply(this,arguments);};}();useEffect(function(){window.history.replaceState({},document.title,window.location.pathname);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo,alt:\"Logo\",style:{width:\"25rem\",height:\"auto\"}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Content of file.txt:\"}),/*#__PURE__*/_jsx(\"pre\",{children:fileContent})]}),/*#__PURE__*/_jsx(\"img\",{id:\"google-login-btn\",src:googleLoginImage,alt:\"Google Login\",className:\"google-login-button\",onClick:function onClick(e){e.preventDefault();e.stopPropagation();logGoogleUser();}})]});};","map":{"version":3,"names":["React","useState","useEffect","logo","googleLoginImage","signInWithGooglePopup","getStorage","ref","getDownloadURL","jsx","_jsx","jsxs","_jsxs","LogInIndex","_useState","_useState2","_slicedToArray","fileContent","setFileContent","logGoogleUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","storage","fileRef","fileUrl","fileData","text","wrap","_callee$","_context","prev","next","sent","console","log","fetch","t0","error","message","stop","apply","arguments","window","history","replaceState","document","title","location","pathname","className","children","src","alt","style","width","height","id","onClick","e","preventDefault","stopPropagation"],"sources":["C:/Users/lenovo/OneDrive - Universitatea Politehnica Timisoara/Desktop/IoT website/EcoLight/src/IoT/logInIndex.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport logo from \"../designFIles/EcoLight.png\";\r\nimport googleLoginImage from \"../designFIles/googlelogin.png\";\r\nimport \"./logInIndex.css\";\r\nimport {\r\n  signInWithGooglePopup,\r\n  getStorage,\r\n  ref,\r\n  getDownloadURL,\r\n} from \"./firebase\"; // Assuming you have firebase.js with necessary functions\r\n\r\nexport const LogInIndex = () => {\r\n  const [fileContent, setFileContent] = useState(\"\");\r\n\r\n  const logGoogleUser = async () => {\r\n    try {\r\n      const response = await signInWithGooglePopup();\r\n      console.log(response);\r\n      const storage = getStorage(); // Initialize Firebase Storage\r\n      const fileRef = ref(storage, \"file.txt\"); // Reference to your file.txt\r\n      const fileUrl = await getDownloadURL(fileRef); // Get download URL of the file\r\n      const fileData = await fetch(fileUrl); // Fetch the file using its URL\r\n      const text = await fileData.text(); // Get text content of the file\r\n      setFileContent(text); // Set file content to state\r\n    } catch (error) {\r\n      console.error(\"Error signing in with Google:\", error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.history.replaceState({}, document.title, window.location.pathname);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <img\r\n        className=\"logo\"\r\n        src={logo}\r\n        alt=\"Logo\"\r\n        style={{ width: \"25rem\", height: \"auto\" }}\r\n      />\r\n      <div>\r\n        <p>Content of file.txt:</p>\r\n        <pre>{fileContent}</pre>\r\n      </div>\r\n      <img\r\n        id=\"google-login-btn\"\r\n        src={googleLoginImage}\r\n        alt=\"Google Login\"\r\n        className=\"google-login-button\"\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          logGoogleUser();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}